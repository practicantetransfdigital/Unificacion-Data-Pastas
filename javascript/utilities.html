<script>
    function showAlert(type, title, message, duration = 5000) {
        // Create alert container if it doesn't exist
        let alertContainer = document.getElementById('alertContainer');
        if (!alertContainer) {
            alertContainer = document.createElement('div');
            alertContainer.id = 'alertContainer';
            alertContainer.className = 'alert-container';
            document.body.appendChild(alertContainer);
        }

        // Create alert element
        const alert = document.createElement('div');
        alert.className = `alert ${type}`;

        const iconSymbols = {
            success: '✓',
            error: '✕',
            warning: '⚠',
            info: 'i'
        };

        alert.innerHTML = `
            <div class="alert-icon">${iconSymbols[type] || 'i'}</div>
            <div class="alert-content">
                <div class="alert-title">${title}</div>
                <div class="alert-message">${message}</div>
            </div>
            <button class="alert-close" onclick="closeAlert(this)">&times;</button>
            <div class="alert-progress"></div>
        `;

        alertContainer.appendChild(alert);

        // Show alert with animation
        setTimeout(() => {
            alert.classList.add('show');
        }, 100);

        // Auto remove alert
        setTimeout(() => {
            closeAlert(alert.querySelector('.alert-close'));
        }, duration);
    }

    function closeAlert(closeBtn) {
        const alert = closeBtn.closest('.alert');
        alert.classList.remove('show');
        setTimeout(() => {
            if (alert.parentNode) {
                alert.parentNode.removeChild(alert);
            }
        }, 400);
    }

    function handleError(error) {
        console.error('Error:', error);
        showAlert('error', 'Error', 'Error al cargar los datos: ' + error.message);
    }

    function handleSubmitSuccess(result) {
        showAlert('success', '¡Éxito!', 'Reporte N2 enviado exitosamente');
        document.getElementById('n2Form').reset();
        limpiarDropZoneN2();
    }

    function showLoadingSpinner() {
        const containers = document.querySelectorAll('.cards-container');
        containers.forEach(container => {
            container.innerHTML = `
      <div class="loading-spinner-tarjetas">
        ${Array(6).fill(0).map(() => `
          <div class="skeleton-card-simple"></div>
        `).join('')}
      </div>
    `;
        });
    }

    function formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString('es-ES', {
            day: '2-digit',
            month: '2-digit',
            year: 'numeric'
        });
    }

    function escapeHtml(str) {
        if (!str) return '';
        return String(str).replace(/[&<>"']/g, s => (
            { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": "&#39;" }[s]
        ));
    }

</script>